<mat-card class="bg-white shadow-md rounded-lg border border-gray-100 overflow-hidden">
  <mat-card-header class="bg-gray-50 border-b border-gray-200 p-6">
    <mat-card-title class="text-xl font-semibold text-gray-800 m-0">Listado de Ventas</mat-card-title>
  </mat-card-header>
  
  <mat-card-content class="p-0">
    @if (isLoading) {
      <div class="flex justify-center items-center py-12">
        <mat-spinner class="mx-auto"></mat-spinner>
      </div>
    } @else {
      <div class="overflow-x-auto">
        <table mat-table [dataSource]="ventas" class="w-full">
          
          <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Fecha 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-600 border-b border-gray-100 font-mono"> 
              {{venta.fechaVenta | date:'short'}} 
            </td>
          </ng-container>

          
          <ng-container matColumnDef="cliente">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Cliente 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-900 font-medium border-b border-gray-100"> 
              {{venta.cliente?.nombre || 'Sistema'}} 
              @if (venta.cliente?.email) {
                <br><small class="text-gray-500">{{venta.cliente.email}}</small>
              }
            </td>
          </ng-container>

          
          <ng-container matColumnDef="producto">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Producto 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-900 font-medium border-b border-gray-100"> 
              {{venta.producto.nombre}}
              <br><small class="text-gray-500">{{venta.producto.precioVenta | currency}}</small>
            </td>
          </ng-container>

          
          <ng-container matColumnDef="cantidad">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-center border-b border-gray-200"> 
              Cantidad 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-900 border-b border-gray-100 text-center font-mono font-semibold"> 
              {{venta.cantidad}} 
            </td>
          </ng-container>

          
          <ng-container matColumnDef="precio">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200"> 
              Precio Unit. 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-900 border-b border-gray-100 text-right font-mono font-semibold"> 
              {{venta.precioUnitario | currency}} 
            </td>
          </ng-container>

          
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200"> 
              Total 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-900 border-b border-gray-100 text-right font-mono font-semibold"> 
              {{venta.total | currency}}
            </td>
          </ng-container>

          
          <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-center border-b border-gray-200"> 
              Estado 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 border-b border-gray-100 text-center">
              <span [class]="'estado-' + venta.estado.toLowerCase()" 
                    class="inline-block px-2 py-1 rounded-full text-xs font-medium">
                {{venta.estado}}
              </span>
            </td>
          </ng-container>

          
          <ng-container matColumnDef="creadoPor">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Creado Por 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 text-gray-600 border-b border-gray-100"> 
              {{venta.creadoPor || 'Sistema'}} 
            </td>
          </ng-container>

          
          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-center border-b border-gray-200"> 
              Acciones 
            </th>
            <td mat-cell *matCellDef="let venta" class="py-3 px-4 border-b border-gray-100 text-center">
              <button mat-icon-button color="primary" matTooltip="Ver detalles"
                      class="hover:bg-blue-50 transition-colors duration-200">
                <mat-icon class="text-blue-600">visibility</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 transition-colors duration-150"></tr>
        </table>
      </div>

      <div *ngIf="ventas.length === 0" class="text-center py-12">
        <div class="max-w-sm mx-auto">
          <div class="text-gray-400 mb-3">
            <mat-icon class="text-5xl">receipt_long</mat-icon>
          </div>
          <p class="text-gray-600 font-medium mb-1">No hay ventas registradas</p>
          <p class="text-gray-500 text-sm">Las ventas realizadas aparecerán aquí.</p>
        </div>
      </div>
    }
  </mat-card-content>
</mat-card>