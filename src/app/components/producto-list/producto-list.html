<mat-card class="bg-white shadow-md rounded-lg border border-gray-100 overflow-hidden">
  <mat-card-header class="bg-gray-50 border-b border-gray-200 p-6">
    <mat-card-title class="text-xl font-semibold text-gray-800 m-0">Lista de Productos</mat-card-title>
  </mat-card-header>
  
  <mat-card-content class="p-0">
    @if (isLoading) {
      <div class="flex justify-center items-center py-12">
        <mat-spinner class="mx-auto"></mat-spinner>
      </div>
    } @else {
      <div class="overflow-x-auto">
        <table mat-table [dataSource]="productos" class="w-full">
          <!-- Columna Nombre -->
          <ng-container matColumnDef="nombre">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Nombre 
            </th>
            <td mat-cell *matCellDef="let producto" class="py-3 px-4 text-gray-900 font-medium border-b border-gray-100"> 
              {{producto.nombre}} 
            </td>
          </ng-container>

          <!-- Columna Descripción -->
          <ng-container matColumnDef="descripcion">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Descripción 
            </th>
            <td mat-cell *matCellDef="let producto" class="py-3 px-4 text-gray-600 border-b border-gray-100"> 
              {{producto.descripcion || '--'}} 
            </td>
          </ng-container>

          <!-- Columna Precio -->
          <ng-container matColumnDef="precioVenta">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200"> 
              Precio 
            </th>
            <td mat-cell *matCellDef="let producto" class="py-3 px-4 text-gray-900 border-b border-gray-100 text-right font-mono font-semibold"> 
              {{producto.precioVenta | currency}}
            </td>
          </ng-container>

          <!-- Columna Componentes -->
          <ng-container matColumnDef="componentes">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200"> 
              Componentes 
            </th>
            <td mat-cell *matCellDef="let producto" class="py-3 px-4 border-b border-gray-100">
              <mat-chip-listbox>
                @for (componente of producto.componentes; track componente.materiaPrimaId) {
                  <mat-chip class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium mr-1 mb-1">
                    {{componente.nombreMateriaPrima}} ({{componente.cantidad}})
                  </mat-chip>
                }
              </mat-chip-listbox>
            </td>
          </ng-container>

          <!-- Columna Acciones -->
          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-center border-b border-gray-200"> 
              Acciones 
            </th>
            <td mat-cell *matCellDef="let producto" class="py-3 px-4 border-b border-gray-100 text-center">
              <button mat-icon-button color="primary" matTooltip="Editar" (click)="editarProducto(producto.id)"
                      class="hover:bg-blue-50 transition-colors duration-200">
                <mat-icon class="text-blue-600">edit</mat-icon>
              </button>
              <button mat-icon-button color="primary" matTooltip="Ver detalles"
                      class="hover:bg-blue-50 transition-colors duration-200">
                <mat-icon class="text-blue-600">visibility</mat-icon>
              </button>
              <button mat-icon-button color="primary" matTooltip="Eliminar" (click)="eliminarProducto(producto.id)"
                      class="hover:bg-blue-50 transition-colors duration-200">
                <mat-icon class="text-blue-600">delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 transition-colors duration-150"></tr>
        </table>
      </div>

      <div *ngIf="productos.length === 0" class="text-center py-12">
        <div class="max-w-sm mx-auto">
          <div class="text-gray-400 mb-3">
            <mat-icon class="text-5xl">inventory</mat-icon>
          </div>
          <p class="text-gray-600 font-medium mb-1">No hay productos registrados</p>
          <p class="text-gray-500 text-sm">Los productos creados aparecerán aquí.</p>
        </div>
      </div>
    }
  </mat-card-content>
</mat-card>