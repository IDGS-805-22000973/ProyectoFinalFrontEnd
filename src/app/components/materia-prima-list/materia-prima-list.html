<!-- components/materia-prima-list/materia-prima-list.html -->
<mat-card class="bg-white shadow-md rounded-lg border border-gray-100 overflow-hidden">
    <mat-card-header class="bg-gray-50 border-b border-gray-200 p-6">
        <mat-card-title class="text-xl font-semibold text-gray-800 m-0">Listado de Materias Primas</mat-card-title>
    </mat-card-header>

    <mat-card-content class="p-0">
        <div *ngIf="isLoading" class="flex justify-center items-center py-12">
            <mat-spinner class="mx-auto"></mat-spinner>
        </div>

        <div *ngIf="!isLoading" class="overflow-x-auto">
            <table mat-table [dataSource]="materiasPrimas" class="w-full">
                <!-- Nombre Column -->
                <ng-container matColumnDef="nombre">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200">
                        Nombre
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 text-gray-900 font-medium border-b border-gray-100">
                        {{materia.nombre}}
                    </td>
                </ng-container>

                <!-- Unidad Column -->
                <ng-container matColumnDef="unidad">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-left border-b border-gray-200">
                        Unidad
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 text-gray-600 border-b border-gray-100">
                        <span class="inline-block bg-gray-100 text-gray-700 text-xs font-medium px-2 py-1 rounded">
                            {{materia.unidad}}
                        </span>
                    </td>
                </ng-container>

                <!-- Existencia Column -->
                <ng-container matColumnDef="existencia">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200">
                        Existencia
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 text-gray-600 border-b border-gray-100 text-right font-mono">
                        {{materia.existencia}}
                    </td>
                </ng-container>

                <!-- Costo Column -->
                <ng-container matColumnDef="costoPromedio">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200">
                        Costo Promedio
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 text-gray-600 border-b border-gray-100 text-right font-mono">
                        ${{materia.costoPromedio | number:'1.2-2'}}
                    </td>
                </ng-container>

                <!-- Ganancia Column -->
                <ng-container matColumnDef="porcentajeGanancia">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-right border-b border-gray-200">
                        % Ganancia
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 border-b border-gray-100 text-right">
                        <span class="inline-block bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded">
                            {{materia.porcentajeGanancia | number:'1.2-2'}}%
                        </span>
                    </td>
                </ng-container>

                <!-- Acciones Column -->
                <ng-container matColumnDef="acciones">
                    <th mat-header-cell *matHeaderCellDef class="bg-gray-50 text-gray-700 font-medium text-sm py-3 px-4 text-center border-b border-gray-200">
                        Acciones
                    </th>
                    <td mat-cell *matCellDef="let materia" class="py-3 px-4 border-b border-gray-100 text-center">
                        <div class="flex justify-center space-x-1">
                            <button mat-icon-button color="primary" (click)="editarMateria(materia)" matTooltip="Editar"
                                    class="hover:bg-blue-50 transition-colors duration-200">
                                <mat-icon class="text-blue-600">edit</mat-icon>
                            </button>
                            <button mat-icon-button color="warn" (click)="eliminarMateria(materia)" matTooltip="Eliminar"
                                    class="hover:bg-red-50 transition-colors duration-200">
                                <mat-icon class="text-red-600">delete</mat-icon>
                            </button>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50 transition-colors duration-150"></tr>
            </table>
        </div>

        <div *ngIf="materiasPrimas.length === 0 && !isLoading" class="text-center py-12">
            <div class="max-w-sm mx-auto">
                <div class="text-gray-400 mb-3">
                    <mat-icon class="text-5xl">inventory_2</mat-icon>
                </div>
                <p class="text-gray-600 font-medium mb-1">No hay materias primas registradas</p>
                <p class="text-gray-500 text-sm">Las materias primas aparecerán aquí una vez que sean añadidas al inventario.</p>
            </div>
        </div>
    </mat-card-content>
</mat-card>