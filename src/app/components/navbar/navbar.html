<div class="shadow-2xl border-b-4 border-[#222F44]">
    <mat-toolbar class="px-6 md:px-16 py-3 bg-[#173A53] relative">

        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute inset-0"
                style="background-image: radial-gradient(circle at 25% 25%, #222F44 2px, transparent 2px), radial-gradient(circle at 75% 75%, #222F44 2px, transparent 2px); background-size: 50px 50px;">
            </div>
        </div>

        <!-- Top accent bar -->
        <div class="absolute top-0 left-0 w-full h-0.5 bg-[#222F44]"></div>

        <!-- Left Section: Menu & Logo -->
        <div class="flex items-center space-x-6 relative z-10">
            <!-- Menú hamburguesa -->
            <button mat-icon-button
                class="bg-[#222F44]/10 hover:bg-[#222F44]/20 rounded-lg p-2 transition-all duration-300 border border-[#222F44]/30 hover:border-[#222F44]">
                <mat-icon class="text-[#222F44]">menu</mat-icon>
            </button>

            <a routerLink="/" class="flex items-center space-x-2 group">
                <div class="relative">
                    <div
                        class="w-12 h-12 bg-gradient-to-br from-eco-green/30 to-secondary/30 rounded-full flex items-center justify-center">
                        <img src="/assets/images/logoOscuro.jpg" alt="Logo" class="w-8 h-8 rounded-full object-cover">
                    </div>
                </div>
                <div>
                    <h1
                        class="text-lg font-bold text-[#222F44] tracking-tight group-hover:tracking-wide transition-all duration-300">
                        Water-Life
                    </h1>
                    <div
                        class="h-0.5 bg-gradient-to-r from-[#222F44] to-transparent group-hover:to-[#222F44] transition-all duration-500">
                    </div>
                </div>
            </a>


        </div>

        <!-- Center Section: Navigation -->
        <div class="flex-1 mx-8 relative z-10">
            <ng-container *ngIf="isLoggedIn()">
                <nav class="flex items-center justify-center space-x-2">
                    <a mat-button routerLink="/admin-comentarios" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">forum</mat-icon>
                        <span>Comentarios</span>
                    </a>

                    <a mat-button routerLink="/dashboard" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">dashboard</mat-icon>
                        <span>Panel</span>
                    </a>

                    <a mat-button routerLink="/venta" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">sell</mat-icon>
                        <span>Ventas</span>
                    </a>

                    <a mat-button routerLink="/cliente" *ngIf="isClient"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">inventory_2</mat-icon>
                        <span>Productos</span>
                    </a>

                    <a mat-button routerLink="/producto" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">category</mat-icon>
                        <span>Catálogo</span>
                    </a>

                    <a mat-button routerLink="/compra-materia" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">shopping_bag</mat-icon>
                        <span>Compras</span>
                    </a>

                    <a mat-button routerLink="/materia-prima" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">manufacturing</mat-icon>
                        <span>Materiales</span>
                    </a>

                    <a mat-button routerLink="/proveedores" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">store</mat-icon>
                        <span>Proveedores</span>
                    </a>

                    <a mat-button routerLink="/usuarios" *ngIf="isAdmin"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">group</mat-icon>
                        <span>Usuarios</span>
                    </a>

                    <a mat-button routerLink="/perfil" *ngIf="isClient"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">account_circle</mat-icon>
                        <span>Perfil</span>
                    </a>

                    <a mat-button routerLink="/cliente-comentario" *ngIf="isClient"
                        class="text-[#222F44] hover:text-[#173A53] hover:bg-[#222F44] px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center space-x-2 border border-transparent hover:border-[#4BCACF]">
                        <mat-icon class="text-lg">rate_review</mat-icon>
                        <span>Opiniones</span>
                    </a>
                </nav>
            </ng-container>

            <!-- Public Navigation -->
            <div *ngIf="!isLoggedIn()" class="flex justify-center">
                <a mat-button routerLink="/cotizacion"
                    class="bg-[#222F44] text-[#173A53] hover:bg-[#222F44]/90 px-8 py-3 rounded-xl font-bold text-lg shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3 border-2 border-[#4BCACF] hover:shadow-[#4BCACF]/25 hover:shadow-xl">
                    <mat-icon class="text-xl">request_page</mat-icon>
                    <span>Solicitar Cotización</span>
                    <div class="w-2 h-2 bg-[#173A53] rounded-full animate-bounce"></div>
                </a>
            </div>
        </div>

        <!-- Right Section: User Area -->
        <div class="relative z-10">
            <div *ngIf="isLoggedIn(); else loginSection">
                <a [matMenuTriggerFor]="menu"
                    class="flex items-center space-x-3 cursor-pointer bg-[#222F44]/5 hover:bg-[#222F44]/15 rounded-xl px-4 py-3 transition-all duration-300 border border-[#4BCACF]/20 hover:border-[#4BCACF]/50 group">

                    <!-- User Avatar -->
                    <div class="relative">
                        <div
                            class="w-10 h-10 bg-gradient-to-br from-[#222F44] to-[#222F44]/70 rounded-xl flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow duration-300">
                            <mat-icon class="text-[#173A53] text-lg">person</mat-icon>
                        </div>
                        <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border border-[#173A53]">
                        </div>
                    </div>

                    <!-- User Info -->
                    <div class="flex flex-col items-start">
                        <span
                            class="text-[#222F44] font-semibold text-sm group-hover:text-[#222F44]/80 transition-colors">
                            {{ userInfo?.nombreUsuario }}
                        </span>
                        <span class="text-[#222F44]/70 text-xs font-medium uppercase tracking-wider">
                            {{ userInfo?.rol }}
                        </span>
                    </div>

                    <!-- Dropdown Icon -->
                    <mat-icon
                        class="text-[#222F44] group-hover:rotate-180 transition-transform duration-300">expand_more</mat-icon>
                </a>

                <mat-menu #menu="matMenu" class="mt-2">
                    <div
                        class="bg-[#173A53] rounded-lg shadow-2xl border-2 border-[#00B2FF] overflow-hidden min-w-[200px]">
                        <div class="bg-[#00B2FF] px-4 py-3">
                            <p class="text-[#173A53] font-bold text-sm">{{ userInfo?.nombreUsuario }}</p>
                            <p class="text-[#173A53]/70 text-xs uppercase tracking-wide">{{ userInfo?.rol }}</p>
                        </div>
                        <button mat-menu-item (click)="logout()"
                            class="flex items-center space-x-3 px-4 py-3 text-[#173A53] hover:bg-[#173A53] hover:text-[#007EB5] transition-all duration-300 w-full">
                            <mat-icon>exit_to_app</mat-icon>
                            <span class="font-medium">Cerrar Sesión</span>
                        </button>
                    </div>
                </mat-menu>
            </div>

            <!-- Login/Register Section -->
            <ng-template #loginSection>
                <div class="flex items-center space-x-3">
                    <a mat-button routerLink="/login"
                        class="text-[#222F44] hover:bg-[#222F44]/10 px-6 py-2 rounded-lg transition-all duration-300 font-medium border border-[#222F44]/30 hover:border-[#4BCACF] flex items-center space-x-2">
                        <mat-icon class="text-lg">login</mat-icon>
                        <span>Acceder</span>
                    </a>
                </div>
            </ng-template>
        </div>

    </mat-toolbar>
</div>